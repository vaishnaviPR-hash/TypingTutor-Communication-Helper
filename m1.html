<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Module 1 â€“ Learn Letters</title>

<style>
/* ===== RESET ===== */
html, body {
  height: 100%;
  width: 100%;
  margin: 0;
  font-family: Arial, sans-serif;
  overflow: hidden;
  box-sizing: border-box;
}
* { box-sizing: inherit; }

/* ===== MAIN ===== */
.main-container {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.mode-content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

/* ===== DISPLAY ===== */
.text-display-section {
  display: flex;
  gap: 15px;
  padding: 20px 15px;
  border-bottom: 4px solid #1a237e;
  max-height: 25vh;
  justify-content: center;
  align-items: center;
}

.typed-content {
  flex: 1;
  padding: 12px 20px;
  border-radius: 16px;
  border: 3px solid #1a237e;
  font-size: 5vw;
  font-weight: bold;
  color: #1a237e;
  text-align: center;
  user-select: none;
  overflow-wrap: break-word;
}

/* ===== KEYBOARD ===== */
.keyboard-section {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 15px;
}

.keyboard-grid {
  width: 100%;
}

.key-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 27px;
}

/* ===== KEYS ===== */
.key-btn {
  height: 60px;
  border-radius: 12px;
  border: 3px solid #1a237e;
  cursor: pointer;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #bbdefb;
  color: #1a237e;
  transition: transform 0.15s ease;
  user-select: none;
  flex-grow: 0;
  flex-shrink: 0;
  flex-basis: calc((100% - (30px * 4)) / 5); /* default width */
  max-width: 90px;
  min-width: 40px;
  font-size: 4.5vw;
}

.key-btn.space-key {
  flex-basis: calc(((100% - (30px * 4)) / 5) * 2 + 30px); /* span 2 keys + 1 gap */
  max-width: 180px;
}

.key-btn.backspace-key {
  flex-basis: calc(((100% - (30px * 4)) / 5) * 2 + 30px);
  max-width: 180px;
  font-size: 3vw;
}

.key-btn.highlight {
  background-color: #ffeb3b;
  border-color: #fbc02d;
  transform: scale(1.08);
}

.key-btn.pressed-animation {
  transform: scale(0.94);
}

.key-btn:active {
  transform: scale(0.95);
}

/* Responsive font sizes */
@media (orientation: landscape) {
  .key-btn {
    flex-basis: calc((100% - (28px * 7)) / 8);
    max-width: 60px;
    min-width: 45px;
    height: 50px;
    font-size: 28px;
  }
  .key-btn.space-key {
    flex: 2;
    max-width: 120px;
  }
  .key-btn.backspace-key {
    flex: 1.5;
    max-width: 100px;
    font-size: 24px;
  }
}
</style>
</head>

<body>
<main class="main-container" id="mainContainer">
  <div class="mode-content">

    <section class="text-display-section" id="displaySection">
      <div class="typed-content" id="typedContent">Press the letter A</div>
      <!-- Removed control buttons (Speak & Clear) -->
    </section>

    <section class="keyboard-section" id="keyboardSection">
      <div class="keyboard-grid">
        <div class="key-row" id="row1"></div>
      </div>
    </section>

  </div>
</main>

<script>
  const keyboardLayout = [
    ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'SPACE', 'BACKSPACE']
  ];

  const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
  let currentIndex = 0;
  let soundEnabled = true;

  const speechSynth = window.speechSynthesis;

  function buildKeyboard() {
    keyboardLayout.forEach((row, index) => {
      const rowElement = document.getElementById(`row${index + 1}`);
      rowElement.innerHTML = ''; // clear any existing keys

      row.forEach(key => {
        const btn = document.createElement('button');
        btn.className = 'key-btn';
        btn.textContent = key === 'SPACE' ? ' ' : key === 'BACKSPACE' ? 'âŒ«' : key;
        btn.setAttribute('data-key', key);
        btn.setAttribute('aria-label', key === 'BACKSPACE' ? 'Backspace' : key === 'SPACE' ? 'Space' : `Letter ${key}`);

        if (key === 'SPACE') {
          btn.classList.add('space-key');
        } else if (key === 'BACKSPACE') {
          btn.classList.add('backspace-key');
        }

        btn.addEventListener('click', () => pressKey(key, btn));
        rowElement.appendChild(btn);
      });
    });
  }

  function updateMessage(text) {
    document.getElementById('typedContent').textContent = text;
  }

  function highlightCurrentKey() {
    document.querySelectorAll('.key-btn').forEach(b => b.classList.remove('highlight'));
    if (currentIndex < letters.length) {
      const currentLetter = letters[currentIndex];
      const btn = document.querySelector(`[data-key="${currentLetter}"]`);
      if (btn) btn.classList.add('highlight');
      updateMessage(`Press the letter ${currentLetter}`);
    } else {
      updateMessage('Great job! ðŸŽ‰');
    }
  }

  function pressKey(key, btnElement) {
    if (currentIndex >= letters.length) return;

    if (key !== letters[currentIndex]) return; // Ignore wrong key presses

    btnElement.classList.add('pressed-animation');
    setTimeout(() => btnElement.classList.remove('pressed-animation'), 150);

    speakLetter(key);

    currentIndex++;
    highlightCurrentKey();
  }

  function speakLetter(letter) {
    if (!soundEnabled) return;
    speechSynth.cancel();
    const utterance = new SpeechSynthesisUtterance(letter.toLowerCase());
    utterance.rate = 0.85;
    utterance.pitch = 1.0;
    utterance.volume = 1.0;
    utterance.lang = 'en-US';
    speechSynth.speak(utterance);
  }

  // Keyboard support with real keyboard
  document.addEventListener('keydown', (e) => {
    const key = e.key.toUpperCase();
    if (key === 'BACKSPACE' || key === ' ') return; // Ignore backspace & space for this module

    if (/^[A-Z]$/.test(key)) {
      const btn = document.querySelector(`[data-key="${key}"]`);
      if (btn) pressKey(key, btn);
    }
  });

  // Initialize
  buildKeyboard();
  highlightCurrentKey();
</script>
</body>
</html>
